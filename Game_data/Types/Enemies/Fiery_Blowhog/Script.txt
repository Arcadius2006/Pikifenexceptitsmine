first_state = examining
death_state = dying

init {
    var ignoring false
}

script {
    examining {
        on_enter {
            animation idling
            timer 6
            move stop
            near_reach search
        }
        on_opponent_in_reach {
            if var ignoring = false
                focus mob
                state chasing
            endif
        }
        on_timer {
            state exploring
        }
        on_itch {
            state bucking
        }
    }
    
    exploring {
        on_enter {
            animation moving
            timer 3
            move randomly
            near_reach search
        }
        on_opponent_in_reach {
            if var ignoring = false
                focus mob
                state chasing
            endif
        }
        on_timer {
            state examining
        }
        on_far_from_home {
            var ignoring true
            state returning
        }
        on_itch {
            state bucking
        }
    }
    
    chasing {
        on_enter {
            animation moving
            move focused_mob
            near_reach attack
            far_reach chase
        }
        on_opponent_in_reach {
            state attacking
        }
        on_focus_off_reach {
            state examining
        }
        on_far_from_home {
            var ignoring true
            state returning
        }
        on_itch {
            state bucking
        }
    }
    
    attacking {
        on_enter {
            move stop
            animation attacking
        }
        on_animation_end {
            state examining
        }
    }
    
    bucking {
        on_enter {
            move stop
            animation bucking
        }
        on_animation_end {
            state examining
        }
    }
    
    returning {
        on_enter {
            move home
            animation moving
            timer 2
            near_reach search
        }
        on_leave {
            timer 0
        }
        on_timer {
            var ignoring false
        }
        on_reach_destination {
            state examining
        }
        on_opponent_in_reach {
            if var ignoring = false
                focus mob
                state chasing
            endif
        }
    }
    
    dying {
        on_enter {
            special_function die_start
            animation dying
        }
        on_animation_end {
            special_function die_end
        }
    }
    
}
