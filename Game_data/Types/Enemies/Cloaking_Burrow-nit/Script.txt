first_state = hidden

script {
    hidden {
        on_enter {
            animation = hidden
        }
        on_near_opponent {
            state = emerging
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    emerging {
        on_enter {
            animation = emerging
        }
        on_animation_end {
            state = examining
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    examining {
        on_enter {
            animation = looking
            move = stop
        }
        on_see_opponent {
            focus = mob
            state = chasing
        }
        on_big_damage {
            state = shaking
        }
        on_death {
            state = dying
        }
        on_animation_end {
            state = returning
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    examining_ignoring {
        on_enter {
            animation = looking
            move = stop
        }
        on_big_damage {
            state = shaking
        }
        on_death {
            state = dying
        }
        on_animation_end {
            state = returning_ignoring
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    chasing {
        on_enter {
            animation = moving
            move = focused_mob
        }
        on_face_opponent {
            state = attacking
        }
        on_lose_focused_mob {
            state = examining_ignoring
        }
        on_far_from_home {
            state = examining_ignoring
        }
        on_big_damage {
            state = shaking
        }
        on_bottomless_pit {
            state = deleting
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    attacking {
        on_enter {
            move = stop
            animation = attacking
            chomp = 1 mouth
        }
        on_animation_end {
            state = checking_mouth
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    checking_mouth {
        on_mouth_occupied {
            state = eating
        }
        on_mouth_empty {
            state = examining
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    eating {
        on_enter {
            chomp =
            animation = eating
        }
        on_animation_end {
            eat = all
            state = examining
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    shaking {
        on_enter {
            move = stop
            animation = shaking
        }
        on_animation_end {
            state = examining
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    returning {
        on_enter {
            move = home
            animation = moving
        }
        on_reach_destination {
            state = hiding
        }
        on_see_opponent {
            state = chasing
        }
        on_bottomless_pit {
            state = deleting
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    returning_ignoring {
        on_enter {
            move = home
            animation = moving
        }
        on_reach_destination {
            state = hiding
        }
        on_bottomless_pit {
            state = deleting
        }
        on_death {
            state = dying
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    hiding {
        on_enter {
            animation = hiding
        }
        on_animation_end {
            state = hidden
        }
        on_touch_spray {
            special_function = spray
        }
    }
    
    dying {
        on_enter {
            special_function = die_start
            animation = dying
            move = stop
            eat = 
        }
        on_animation_end {
            special_function = die_end
        }
    }
    
    deleting {
        on_enter {
            special_function = die_end
            special_function = delete
        }
    }
    
}
