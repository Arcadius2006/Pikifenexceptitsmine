first_state = relaxing
death_state = dying

script {
    relaxing {
        on_enter {
            set_animation idling
            stop
            set_near_reach fear
            set_far_reach fear
        }
        on_opponent_in_reach {
            focus opponent
            set_state panicking
        }
        on_itch {
            set_state shaking
        }
    }
    
    panicking {
        on_enter {
            set_animation moving
            set_timer 0.3
            move randomly
        }
        on_timer {
            set_timer 0.3
            move randomly
        }
        on_focus_off_reach {
            set_state relaxing
        }
        on_far_from_home {
            set_state going_home
        }
        on_itch {
            set_state shaking
        }
    }
    
    going_home {
        on_enter {
            move home
            set_animation moving
        }
        on_reach_destination {
            set_state relaxing
        }
        on_itch {
            set_state shaking
        }
    }
    
    shaking {
        on_enter {
            stop
            set_animation shaking
        }
        on_animation_end {
            set_state attacking
        }
    }
    
    attacking {
        on_enter {
            set_animation attacking
            set_particle_generator gas_explosion 0 0
        }
        on_animation_end {
            set_state relaxing
        }
    }
    
    dying {
        on_enter {
            start_dying
            set_animation dying
        }
        on_animation_end {
            finish_dying
        }
    }
    
}
