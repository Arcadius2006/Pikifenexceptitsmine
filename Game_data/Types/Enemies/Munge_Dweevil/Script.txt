first_state = relaxing
death_state = dying

script {
    relaxing {
        on_enter {
            animation idling
            move stop
            near_reach fear
            far_reach fear
        }
        on_opponent_in_reach {
            focus opponent
            state panicking
        }
        on_itch {
            state shaking
        }
    }
    
    panicking {
        on_enter {
            animation moving
            timer 0.3
            move randomly
        }
        on_timer {
            timer 0.3
            move randomly
        }
        on_focus_off_reach {
            state relaxing
        }
        on_far_from_home {
            state going_home
        }
        on_itch {
            state shaking
        }
    }
    
    going_home {
        on_enter {
            move home
            animation moving
        }
        on_reach_destination {
            state relaxing
        }
        on_itch {
            state shaking
        }
    }
    
    shaking {
        on_enter {
            move stop
            animation shaking
        }
        on_animation_end {
            state attacking
        }
    }
    
    attacking {
        on_enter {
            animation attacking
            particle gas_explosion
        }
        on_animation_end {
            state relaxing
            particle 
        }
    }
    
    dying {
        on_enter {
            special_function die_start
            animation dying
        }
        on_animation_end {
            special_function die_end
        }
    }
    
}
