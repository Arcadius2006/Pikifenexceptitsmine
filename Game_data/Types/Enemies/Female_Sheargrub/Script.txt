first_state = hidden

script {
    hidden {
        on_enter {
            animation hidden
            hide true
            near_reach chase
            far_reach chase
        }
        on_opponent_in_reach {
            state emerging
        }
        on_leave {
            hide false
        }
        on_touch_spray {
            special_function spray
        }
    }
    
    emerging {
        on_enter {
            animation emerging
        }
        on_animation_end {
            state examining
        }
        on_touch_spray {
            special_function spray
        }
        on_death {
            state dying
        }
    }
    
    examining {
        on_enter {
            animation examining
        }
        on_opponent_in_reach {
            focus mob
            state chasing
        }
        on_animation_end {
            state going_home
        }
        on_pikmin_land {
            state crushed
        }
        on_touch_spray {
            special_function spray
        }
        on_death {
            state dying
        }
    }
    
    burying {
        on_enter {
            animation burying
        }
        on_animation_end {
            state hidden
        }
        on_touch_spray {
            special_function spray
        }
        on_death {
            state dying
        }
    }
    
    chasing {
        on_enter {
            animation moving
            move focused_mob
        }
        on_focus_off_reach {
            state going_home
        }
        on_far_from_home {
            state going_home
        }
        on_pikmin_land {
            state crushed
        }
        on_bottomless_pit {
            state deleting
        }
        on_touch_spray {
            special_function spray
        }
        on_death {
            state dying
        }
    }
    
    going_home {
        on_enter {
            animation moving
            move home
        }
        on_reach_destination {
            state burying
        }
        on_pikmin_land {
            state crushed
        }
        on_bottomless_pit {
            state deleting
        }
        on_touch_spray {
            special_function spray
        }
        on_death {
            state dying
        }
    }
    
    crushed {
        on_enter {
            state dying
        }
    }
    
    dying {
        on_enter {
            special_function die_start
            animation dying
            move stop
        }
        on_animation_end {
            special_function die_end
        }
    }
    
    deleting {
        on_enter {
            special_function die_end
            special_function delete
        }
    }
    
}
